{
  "permissions": {
    "allow": [
      "Bash(npm run build:*)",
      "Bash(bunx next build:*)",
      "Bash(npx tsc:*)",
      "Bash(git stash:*)",
      "Bash(mkdir:*)",
      "Bash(rm:*)",
      "Bash(bunx tsc:*)",
      "Bash(git add:*)",
      "Bash(git commit:*)",
      "WebFetch(domain:ui.shadcn.com)",
      "Bash(bunx shadcn@latest add:*)",
      "Bash(bun x shadcn@latest add:*)",
      "Bash(tree:*)",
      "Bash(grep:*)",
      "Bash(bunx eslint:*)",
      "Bash(test:*)",
      "Bash(mcp list-tools:*)",
      "WebSearch",
      "Bash(claude mcp list:*)",
      "WebFetch(domain:developers.notion.com)",
      "Bash(claude mcp:*)",
      "Bash(echo:*)",
      "Bash(cat:*)",
      "Bash(ls:*)",
      "Bash(bun run build:*)",
      "Bash(timeout 15 bun run dev:*)",
      "Bash(bun add:*)",
      "Bash(bunx:*)",
      "Bash(curl:*)",
      "WebFetch(domain:supabase.com)",
      "WebFetch(domain:github.com)",
      "Bash(bun test:*)",
      "Bash(timeout 120 bun run:*)",
      "Bash(timeout 60 bun run build:*)",
      "Bash(timeout 10 bun run dev:*)",
      "Bash(bun run lint)",
      "Bash(bun x:*)",
      "Bash(find:*)",
      "Bash(npm test:*)",
      "Bash(npm run:*)",
      "Bash(\"E:/personal-dev/lanzate/features/auth/schemas/auth.schema.ts\" <<'EOF'\n/**\n * Authentication Validation Schemas\n *\n * This file composes complete validation schemas for all authentication\n * use cases by combining the reusable field validators from authFields.ts.\n *\n * Each schema is tailored to its specific use case:\n * - signupSchema: Full validation for new user registration\n * - loginSchema: Minimal validation (don't reject existing weak passwords)\n * - resetPasswordRequestSchema: Email-only validation\n * - resetPasswordSchema: Password validation for reset flow\n * - updateProfileSchema: Optional email and password validation for profile updates\n *\n * Types are automatically inferred from schemas using yup.InferType\n * to ensure type safety across the application.\n */\n\nimport * as yup from 'yup';\n\nimport { emailField, passwordField } from '@/features/auth/schemas/authFields';\n\n/**\n * Signup Schema\n *\n * Validates new user registration with:\n * - Valid email format (lowercase, trimmed)\n * - Strong password (8+ chars, uppercase, number)\n * - Matching password confirmation\n */\nexport const signupSchema = yup.object({\n  email: emailField.required('El email es obligatorio'),\n  password: passwordField.required('La contraseña es obligatoria'),\n  confirmPassword: yup\n    .string()\n    .oneOf([yup.ref('password')], 'Las contraseñas no coinciden')\n    .required('Debes confirmar la contraseña'),\n});\n\n/**\n * Login Schema\n *\n * Validates login credentials with minimal requirements:\n * - Valid email format\n * - Password presence (no strength validation)\n *\n * We don't validate password strength on login to avoid\n * rejecting existing users with weaker passwords\n */\nexport const loginSchema = yup.object({\n  email: emailField.required('El email es obligatorio'),\n  password: yup.string().required('La contraseña es obligatoria'),\n});\n\n/**\n * Password Reset Request Schema\n *\n * Validates password reset request with:\n * - Valid email format only\n *\n * Used when user requests a password reset link\n */\nexport const resetPasswordRequestSchema = yup.object({\n  email: emailField.required('El email es obligatorio'),\n});\n\n/**\n * Password Reset Schema\n *\n * Validates password reset form with:\n * - Strong new password (8+ chars, uppercase, number)\n * - Matching password confirmation\n *\n * Used when user sets a new password via reset link\n */\nexport const resetPasswordSchema = yup.object({\n  password: passwordField.required('La contraseña es obligatoria'),\n  confirmPassword: yup\n    .string()\n    .oneOf([yup.ref('password')], 'Las contraseñas no coinciden')\n    .required('Debes confirmar la contraseña'),\n});\n\n/**\n * Update Profile Schema\n *\n * Validates profile update with optional fields:\n * - Email (optional, but must be valid if provided)\n * - Password (optional, but must be strong if provided)\n * - Confirm password (required if password is provided)\n *\n * Used when user updates their profile information\n */\nexport const updateProfileSchema = yup.object({\n  email: emailField.optional(),\n  password: passwordField.optional(),\n  confirmPassword: yup\n    .string()\n    .when('password', {\n      is: (password: string | undefined) => password && password.length > 0,\n      then: (schema) => schema\n        .oneOf([yup.ref('password')], 'Las contraseñas no coinciden')\n        .required('Debes confirmar la contraseña'),\n      otherwise: (schema) => schema.optional(),\n    }),\n}).test(\n  'at-least-one-field',\n  'Debes proporcionar al menos un campo para actualizar',\n  (value) => !!(value.email || value.password)\n);\n\n/**\n * Inferred TypeScript types from schemas\n *\n * These types are automatically generated from the Yup schemas\n * and ensure type safety when using these schemas in forms\n * and server actions\n */\nexport type SignupInput = yup.InferType<typeof signupSchema>;\nexport type LoginInput = yup.InferType<typeof loginSchema>;\nexport type ResetPasswordRequestInput = yup.InferType<typeof resetPasswordRequestSchema>;\nexport type ResetPasswordInput = yup.InferType<typeof resetPasswordSchema>;\nexport type UpdateProfileInput = yup.InferType<typeof updateProfileSchema>;\nEOF)",
      "Bash(\"E:/personal-dev/lanzate/features/auth/actions/updateProfile.action.ts\" <<'EOF'\n'use server';\n\nimport { revalidatePath } from 'next/cache';\n\nimport { AUTH_SUCCESS_MESSAGES } from '@/features/auth/constants/messages';\nimport {\n  updateProfileSchema,\n  type UpdateProfileInput,\n} from '@/features/auth/schemas/auth.schema';\nimport { updateUserProfileService } from '@/features/auth/services';\nimport { actionWrapper } from '@/features/global/utils/action-wrapper';\nimport { formatSuccess } from '@/features/global/utils/format-response';\nimport { createClient } from '@/lib/supabase/server';\n\n/**\n * Update Profile Server Action\n *\n * Updates the user's profile information including email and/or password.\n * Updates both Supabase Auth and the database record.\n *\n * Flow:\n * 1. Validate input with updateProfileSchema\n * 2. Get current authenticated user\n * 3. Update via updateUserProfileService (handles Supabase and database)\n * 4. Revalidate /profile path\n * 5. Return success response\n *\n * Security:\n * - User must be authenticated\n * - At least one field (email or password) must be provided\n * - Password must meet strength requirements if provided\n *\n * @param input - Profile update data (email?, password?, confirmPassword?)\n * @returns ServerResponse with updated user data or error\n *\n * @example\n * ```tsx\n * import { updateProfileAction } from '@/features/auth/actions/updateProfile.action';\n *\n * // Update only email\n * const result = await updateProfileAction({\n *   email: 'newemail@example.com'\n * });\n *\n * // Update only password\n * const result = await updateProfileAction({\n *   password: 'NewPassword123',\n *   confirmPassword: 'NewPassword123'\n * });\n *\n * // Update both email and password\n * const result = await updateProfileAction({\n *   email: 'newemail@example.com',\n *   password: 'NewPassword123',\n *   confirmPassword: 'NewPassword123'\n * });\n *\n * if (!result.hasError) {\n *   // Profile updated successfully\n *   console.log('Updated user:', result.payload?.user);\n * }\n * ```\n */\nexport async function updateProfileAction(input: UpdateProfileInput) {\n  return actionWrapper(async () => {\n    // Validate input with Yup schema\n    // This will throw ValidationError if invalid, caught by actionWrapper\n    const validatedData = await updateProfileSchema.validate(input);\n\n    const { email, password } = validatedData;\n\n    // Create Supabase client\n    const supabase = await createClient();\n\n    // Get current authenticated user\n    const {\n      data: { user: authUser },\n      error: authError,\n    } = await supabase.auth.getUser();\n\n    if (authError) {\n      throw new Error(authError.message);\n    }\n\n    if (!authUser) {\n      throw new Error('No authenticated user found');\n    }\n\n    // Get database user ID from Supabase user metadata or database lookup\n    // We need the database user ID to update the record\n    const { data: dbUserData, error: dbUserError } = await supabase\n      .from('User')\n      .select('id')\n      .eq('supabaseId', authUser.id)\n      .single();\n\n    if (dbUserError || !dbUserData) {\n      throw new Error('Database user not found');\n    }\n\n    // Prepare update parameters\n    const updateParams: { email?: string; password?: string } = {};\n\n    if (email) {\n      updateParams.email = email;\n    }\n\n    if (password) {\n      updateParams.password = password;\n    }\n\n    // Update user profile via service layer\n    // Service handles both Supabase auth and database updates\n    const updatedUser = await updateUserProfileService(\n      dbUserData.id,\n      updateParams\n    );\n\n    // Revalidate profile path to ensure fresh data\n    revalidatePath('/profile');\n\n    // Determine success message based on what was updated\n    let successMessage = AUTH_SUCCESS_MESSAGES.PROFILE_UPDATE.en;\n    if (email && !password) {\n      successMessage = AUTH_SUCCESS_MESSAGES.EMAIL_UPDATE.en;\n    } else if (password && !email) {\n      successMessage = AUTH_SUCCESS_MESSAGES.PASSWORD_UPDATE.en;\n    }\n\n    // Return success response\n    return formatSuccess(successMessage, {\n      user: updatedUser,\n      authUser,\n    });\n  });\n}\nEOF)",
      "Bash(\"E:/personal-dev/lanzate/features/auth/actions/index.ts\" <<'EOF'\n/**\n * Auth actions index file\n *\n * Exports all Server Actions for the auth feature\n */\n\nexport { logoutAction } from \"@/features/auth/actions/logout.action\";\nexport { handleSignupAction } from \"@/features/auth/actions/handleSignup.action\";\nexport { handleLoginAction } from \"@/features/auth/actions/handleLogin.action\";\nexport { handleResetPasswordRequestAction } from \"@/features/auth/actions/handleResetPasswordRequest.action\";\nexport { handleGoogleLoginAction } from \"@/features/auth/actions/handleGoogleLogin.action\";\nexport { handleResetPasswordAction } from \"@/features/auth/actions/handleResetPassword.action\";\nexport { handleLogoutAction } from \"@/features/auth/actions/handleLogout.action\";\nexport { getCurrentUserAction } from \"@/features/auth/actions/getCurrentUser.action\";\nexport { updateProfileAction } from \"@/features/auth/actions/updateProfile.action\";\nEOF)",
      "Bash(\"E:/personal-dev/lanzate/features/auth/actions/updateProfile.action.ts\" <<'EOF'\n'use server';\n\nimport { revalidatePath } from 'next/cache';\n\nimport { AUTH_SUCCESS_MESSAGES } from '@/features/auth/constants/messages';\nimport { getUserBySupabaseId } from '@/features/auth/data';\nimport {\n  updateProfileSchema,\n  type UpdateProfileInput,\n} from '@/features/auth/schemas/auth.schema';\nimport { updateUserProfileService } from '@/features/auth/services';\nimport { actionWrapper } from '@/features/global/utils/action-wrapper';\nimport { formatSuccess } from '@/features/global/utils/format-response';\nimport { createClient } from '@/lib/supabase/server';\n\n/**\n * Update Profile Server Action\n *\n * Updates the user's profile information including email and/or password.\n * Updates both Supabase Auth and the database record.\n *\n * Flow:\n * 1. Validate input with updateProfileSchema\n * 2. Get current authenticated user\n * 3. Fetch database user via getUserBySupabaseId\n * 4. Update via updateUserProfileService (handles Supabase and database)\n * 5. Revalidate /profile path\n * 6. Return success response\n *\n * Security:\n * - User must be authenticated\n * - At least one field (email or password) must be provided\n * - Password must meet strength requirements if provided\n *\n * @param input - Profile update data (email?, password?, confirmPassword?)\n * @returns ServerResponse with updated user data or error\n *\n * @example\n * ```tsx\n * import { updateProfileAction } from '@/features/auth/actions/updateProfile.action';\n *\n * // Update only email\n * const result = await updateProfileAction({\n *   email: 'newemail@example.com'\n * });\n *\n * // Update only password\n * const result = await updateProfileAction({\n *   password: 'NewPassword123',\n *   confirmPassword: 'NewPassword123'\n * });\n *\n * // Update both email and password\n * const result = await updateProfileAction({\n *   email: 'newemail@example.com',\n *   password: 'NewPassword123',\n *   confirmPassword: 'NewPassword123'\n * });\n *\n * if (!result.hasError) {\n *   // Profile updated successfully\n *   console.log('Updated user:', result.payload?.user);\n * }\n * ```\n */\nexport async function updateProfileAction(input: UpdateProfileInput) {\n  return actionWrapper(async () => {\n    // Validate input with Yup schema\n    // This will throw ValidationError if invalid, caught by actionWrapper\n    const validatedData = await updateProfileSchema.validate(input);\n\n    const { email, password } = validatedData;\n\n    // Create Supabase client\n    const supabase = await createClient();\n\n    // Get current authenticated user\n    const {\n      data: { user: authUser },\n      error: authError,\n    } = await supabase.auth.getUser();\n\n    if (authError) {\n      throw new Error(authError.message);\n    }\n\n    if (!authUser) {\n      throw new Error('No authenticated user found');\n    }\n\n    // Fetch database user record via data layer\n    const dbUser = await getUserBySupabaseId(authUser.id);\n\n    // Prepare update parameters\n    const updateParams: { email?: string; password?: string } = {};\n\n    if (email) {\n      updateParams.email = email;\n    }\n\n    if (password) {\n      updateParams.password = password;\n    }\n\n    // Update user profile via service layer\n    // Service handles both Supabase auth and database updates\n    const updatedUser = await updateUserProfileService(\n      dbUser.id,\n      updateParams\n    );\n\n    // Revalidate profile path to ensure fresh data\n    revalidatePath('/profile');\n\n    // Determine success message based on what was updated\n    let successMessage = AUTH_SUCCESS_MESSAGES.PROFILE_UPDATE.en;\n    if (email && !password) {\n      successMessage = AUTH_SUCCESS_MESSAGES.EMAIL_UPDATE.en;\n    } else if (password && !email) {\n      successMessage = AUTH_SUCCESS_MESSAGES.PASSWORD_UPDATE.en;\n    }\n\n    // Return success response\n    return formatSuccess(successMessage, {\n      user: updatedUser,\n      authUser,\n    });\n  });\n}\nEOF)",
      "Bash(\"E:/personal-dev/lanzate/features/auth/actions/updateProfile.action.ts\" <<'EOF'\n'use server';\n\nimport { revalidatePath } from 'next/cache';\n\nimport { AUTH_SUCCESS_MESSAGES } from '@/features/auth/constants/messages';\nimport { getUserBySupabaseId } from '@/features/auth/data';\nimport {\n  updateProfileSchema,\n  type UpdateProfileInput,\n} from '@/features/auth/schemas/auth.schema';\nimport { updateUserProfileService } from '@/features/auth/services';\nimport { actionWrapper } from '@/features/global/utils/action-wrapper';\nimport { formatSuccess } from '@/features/global/utils/format-response';\nimport { createClient } from '@/lib/supabase/server';\n\n/**\n * Update Profile Server Action\n *\n * Updates the user's profile information including email and/or password.\n * Updates both Supabase Auth and the database record.\n *\n * Flow:\n * 1. Validate input with updateProfileSchema\n * 2. Get current authenticated user\n * 3. Fetch database user via getUserBySupabaseId\n * 4. Update via updateUserProfileService (handles Supabase and database)\n * 5. Revalidate /profile path\n * 6. Return success response\n *\n * Security:\n * - User must be authenticated\n * - At least one field (email or password) must be provided\n * - Password must meet strength requirements if provided\n *\n * @param input - Profile update data (email?, password?, confirmPassword?)\n * @returns ServerResponse with updated user data or error\n *\n * @example\n * ```tsx\n * import { updateProfileAction } from '@/features/auth/actions/updateProfile.action';\n *\n * // Update only email\n * const result = await updateProfileAction({\n *   email: 'newemail@example.com'\n * });\n *\n * // Update only password\n * const result = await updateProfileAction({\n *   password: 'NewPassword123',\n *   confirmPassword: 'NewPassword123'\n * });\n *\n * // Update both email and password\n * const result = await updateProfileAction({\n *   email: 'newemail@example.com',\n *   password: 'NewPassword123',\n *   confirmPassword: 'NewPassword123'\n * });\n *\n * if (!result.hasError) {\n *   // Profile updated successfully\n *   console.log('Updated user:', result.payload?.user);\n * }\n * ```\n */\nexport async function updateProfileAction(input: UpdateProfileInput) {\n  return actionWrapper(async () => {\n    // Validate input with Yup schema\n    // This will throw ValidationError if invalid, caught by actionWrapper\n    const validatedData = await updateProfileSchema.validate(input);\n\n    const { email, password } = validatedData;\n\n    // Create Supabase client\n    const supabase = await createClient();\n\n    // Get current authenticated user\n    const {\n      data: { user: authUser },\n      error: authError,\n    } = await supabase.auth.getUser();\n\n    if (authError) {\n      throw new Error(authError.message);\n    }\n\n    if (!authUser) {\n      throw new Error('No authenticated user found');\n    }\n\n    // Fetch database user record via data layer\n    const dbUser = await getUserBySupabaseId(authUser.id);\n\n    // Prepare update parameters\n    const updateParams: { email?: string; password?: string } = {};\n\n    if (email) {\n      updateParams.email = email;\n    }\n\n    if (password) {\n      updateParams.password = password;\n    }\n\n    // Update user profile via service layer\n    // Service handles both Supabase auth and database updates\n    const updatedUser = await updateUserProfileService(\n      dbUser.id,\n      updateParams\n    );\n\n    // Revalidate profile path to ensure fresh data\n    revalidatePath('/profile');\n\n    // Determine success message based on what was updated\n    let successMessage: string = AUTH_SUCCESS_MESSAGES.PROFILE_UPDATE.en;\n    if (email && !password) {\n      successMessage = AUTH_SUCCESS_MESSAGES.EMAIL_UPDATE.en;\n    } else if (password && !email) {\n      successMessage = AUTH_SUCCESS_MESSAGES.PASSWORD_UPDATE.en;\n    }\n\n    // Return success response\n    return formatSuccess(successMessage, {\n      user: updatedUser,\n      authUser,\n    });\n  });\n}\nEOF)",
      "Bash(npm run test:*)",
      "Bash(python3:*)",
      "Bash(\"E:/personal-dev/lanzate/messages/en.json\" <<'EOF'\n{\n  \"welcome\": \"Welcome to Lanzate\",\n  \"description\": \"You dream it, Lanzate makes it happen\",\n  \"getStarted\": \"Get Started\",\n  \"login\": \"Log In\",\n  \"dashboard\": \"Dashboard\",\n  \"stores\": \"Stores\",\n  \"logout\": \"Log Out\",\n  \"language\": \"Language\",\n  \"theme\": \"Theme\",\n  \"light\": \"Light\",\n  \"dark\": \"Dark\",\n  \"metadata\": {\n    \"title\": \"Lanzate - You dream it, we make it happen\",\n    \"description\": \"E-commerce platform for creating and managing your online stores\"\n  },\n  \"hero\": {\n    \"titleBefore\": \"You dream it,\",\n    \"titleHighlight\": \"Lanzate\",\n    \"titleAfter\": \"makes it happen\",\n    \"subtitle\": \"Managing your business has never been easier. Focus on growth while we give you full control\",\n    \"cta\": {\n      \"primary\": \"Get Started\",\n      \"secondary\": \"More Info\"\n    },\n    \"imageAlt\": \"Illustration of a person launching a rocket, symbolizing the launch of a new online store with Lanzate\"\n  },\n  \"nav\": {\n    \"home\": \"Home\",\n    \"access\": \"Access\",\n    \"moreInfo\": \"More Info\"\n  },\n  \"auth\": {\n    \"signup\": {\n      \"page\": {\n        \"title\": \"Signup - Lanzate\",\n        \"description\": \"Create your account to get started with Lanzate\",\n        \"header\": {\n          \"title\": \"Sign Up\",\n          \"description\": \"Create your account to get started\"\n        },\n        \"links\": {\n          \"hasAccount\": \"Already have an account?\",\n          \"needHelp\": \"Need help?\",\n          \"loginLink\": \"Log In\",\n          \"helpLink\": \"Contact us\"\n        },\n        \"image\": {\n          \"alt\": \"Sign up illustration\"\n        }\n      },\n      \"form\": {\n        \"fields\": {\n          \"email\": {\n            \"label\": \"Email\",\n            \"placeholder\": \"email@example.com\",\n            \"tooltip\": \"Enter the email address associated with your account.\"\n          },\n          \"username\": {\n            \"label\": \"Username\",\n            \"placeholder\": \"Username\",\n            \"tooltip\": \"Enter the username associated with your account.\"\n          },\n          \"password\": {\n            \"label\": \"Password\",\n            \"placeholder\": \"Password\",\n            \"tooltip\": \"Enter the password associated with your account.\"\n          },\n          \"confirmPassword\": {\n            \"label\": \"Confirm Password\",\n            \"placeholder\": \"Confirm Password\",\n            \"tooltip\": \"Enter the password associated with your account.\"\n          }\n        },\n        \"actions\": {\n          \"submit\": \"Sign Up\"\n        },\n        \"messages\": {\n          \"success\": \"You have been registered successfully\",\n          \"loading\": \"Signing up...\"\n        }\n      },\n      \"social\": {\n        \"label\": \"Or continue with\",\n        \"providers\": {\n          \"google\": \"Google\",\n          \"facebook\": \"Facebook\"\n        }\n      }\n    },\n    \"login\": {\n      \"page\": {\n        \"title\": \"Login - Lanzate\",\n        \"description\": \"Sign in to your account to continue\",\n        \"header\": {\n          \"title\": \"Welcome Back\",\n          \"description\": \"Sign in to your account to continue\"\n        },\n        \"links\": {\n          \"noAccount\": \"Don't have an account?\",\n          \"needHelp\": \"Need help?\",\n          \"signupLink\": \"Sign Up\",\n          \"helpLink\": \"Contact us\",\n          \"resetPassword\": \"Forgot password?\"\n        },\n        \"image\": {\n          \"alt\": \"Login illustration\"\n        }\n      },\n      \"form\": {\n        \"fields\": {\n          \"email\": {\n            \"label\": \"Email\",\n            \"placeholder\": \"email@example.com\",\n            \"tooltip\": \"Enter your email address\"\n          },\n          \"password\": {\n            \"label\": \"Password\",\n            \"placeholder\": \"Enter your password\",\n            \"tooltip\": \"Enter your password\"\n          }\n        },\n        \"actions\": {\n          \"submit\": \"Log In\"\n        },\n        \"messages\": {\n          \"success\": \"Login successful. Welcome back!\",\n          \"loading\": \"Signing in...\"\n        }\n      },\n      \"social\": {\n        \"label\": \"Or continue with\",\n        \"providers\": {\n          \"google\": \"Google\"\n        }\n      }\n    }\n  }\n}\nEOF)",
      "Bash(\"E:/personal-dev/lanzate/messages/es.json\" <<'EOF'\n{\n  \"welcome\": \"Bienvenido a Lanzate\",\n  \"description\": \"Lo sueñas, Lanzate lo hace realidad\",\n  \"getStarted\": \"Comenzar\",\n  \"login\": \"Iniciar sesión\",\n  \"dashboard\": \"Panel de control\",\n  \"stores\": \"Tiendas\",\n  \"logout\": \"Cerrar sesión\",\n  \"language\": \"Idioma\",\n  \"theme\": \"Tema\",\n  \"light\": \"Claro\",\n  \"dark\": \"Oscuro\",\n  \"metadata\": {\n    \"title\": \"Lanzate - Lo sueñas, nosotros lo hacemos realidad\",\n    \"description\": \"Plataforma de e-commerce para crear y administrar tus tiendas en línea\"\n  },\n  \"hero\": {\n    \"titleBefore\": \"Lo sueñas,\",\n    \"titleHighlight\": \"Lanzate\",\n    \"titleAfter\": \"lo hace realidad\",\n    \"subtitle\": \"Administrar tu negocio nunca ha sido tan fácil. Enfócate en el crecimiento mientras te damos el control total\",\n    \"cta\": {\n      \"primary\": \"Comenzar\",\n      \"secondary\": \"Más información\"\n    },\n    \"imageAlt\": \"Ilustración de una persona trabajando en su tienda en línea\"\n  },\n  \"nav\": {\n    \"home\": \"Inicio\",\n    \"access\": \"Acceso\",\n    \"moreInfo\": \"Más Info\"\n  },\n  \"auth\": {\n    \"signup\": {\n      \"page\": {\n        \"title\": \"Registrarse - Lanzate\",\n        \"description\": \"Crea tu cuenta para comenzar con Lanzate\",\n        \"header\": {\n          \"title\": \"Registrarse\",\n          \"description\": \"Crea tu cuenta para comenzar\"\n        },\n        \"links\": {\n          \"hasAccount\": \"¿Ya tienes una cuenta?\",\n          \"needHelp\": \"¿Necesitas ayuda?\",\n          \"loginLink\": \"Iniciar sesión\",\n          \"helpLink\": \"Contáctanos\"\n        },\n        \"image\": {\n          \"alt\": \"Ilustración de registro\"\n        }\n      },\n      \"form\": {\n        \"fields\": {\n          \"email\": {\n            \"label\": \"Correo electrónico\",\n            \"placeholder\": \"correo@ejemplo.com\",\n            \"tooltip\": \"Ingresa la dirección de correo electrónico asociada con tu cuenta.\"\n          },\n          \"username\": {\n            \"label\": \"Nombre de usuario\",\n            \"placeholder\": \"Nombre de usuario\",\n            \"tooltip\": \"Ingresa el nombre de usuario asociado con tu cuenta.\"\n          },\n          \"password\": {\n            \"label\": \"Contraseña\",\n            \"placeholder\": \"Contraseña\",\n            \"tooltip\": \"Ingresa la contraseña asociada con tu cuenta.\"\n          },\n          \"confirmPassword\": {\n            \"label\": \"Confirmar contraseña\",\n            \"placeholder\": \"Confirmar contraseña\",\n            \"tooltip\": \"Ingresa la contraseña asociada con tu cuenta.\"\n          }\n        },\n        \"actions\": {\n          \"submit\": \"Registrarse\"\n        },\n        \"messages\": {\n          \"success\": \"Te has registrado exitosamente\",\n          \"loading\": \"Registrándote...\"\n        }\n      },\n      \"social\": {\n        \"label\": \"O continúa con\",\n        \"providers\": {\n          \"google\": \"Google\",\n          \"facebook\": \"Facebook\"\n        }\n      }\n    },\n    \"login\": {\n      \"page\": {\n        \"title\": \"Iniciar sesión - Lanzate\",\n        \"description\": \"Inicia sesión en tu cuenta para continuar\",\n        \"header\": {\n          \"title\": \"Bienvenido de nuevo\",\n          \"description\": \"Inicia sesión en tu cuenta para continuar\"\n        },\n        \"links\": {\n          \"noAccount\": \"¿No tienes una cuenta?\",\n          \"needHelp\": \"¿Necesitas ayuda?\",\n          \"signupLink\": \"Registrarse\",\n          \"helpLink\": \"Contáctanos\",\n          \"resetPassword\": \"¿Olvidaste tu contraseña?\"\n        },\n        \"image\": {\n          \"alt\": \"Ilustración de inicio de sesión\"\n        }\n      },\n      \"form\": {\n        \"fields\": {\n          \"email\": {\n            \"label\": \"Correo electrónico\",\n            \"placeholder\": \"correo@ejemplo.com\",\n            \"tooltip\": \"Ingresa tu correo electrónico\"\n          },\n          \"password\": {\n            \"label\": \"Contraseña\",\n            \"placeholder\": \"Ingresa tu contraseña\",\n            \"tooltip\": \"Ingresa tu contraseña\"\n          }\n        },\n        \"actions\": {\n          \"submit\": \"Iniciar sesión\"\n        },\n        \"messages\": {\n          \"success\": \"Inicio de sesión exitoso. ¡Bienvenido de nuevo!\",\n          \"loading\": \"Iniciando sesión...\"\n        }\n      },\n      \"social\": {\n        \"label\": \"O continúa con\",\n        \"providers\": {\n          \"google\": \"Google\"\n        }\n      }\n    }\n  }\n}\nEOF)",
      "Bash(cp:*)",
      "Bash(mv:*)",
      "Bash(ls -la \"E:\\personal-dev\\lanzate\\app\\auth\"\" 2>/dev/null || echo \"Directory may not exist yet \")",
      "WebFetch(domain:next-intl.dev)",
      "Bash(timeout 30 npm run dev)",
      "Bash(bun test --help:*)",
      "Bash(ls -la \"E:\\personal-dev\\lanzate\\__tests__\\features\\stores\"\" 2>/dev/null || echo \"Directory does not exist \")",
      "Bash(bun run typecheck:*)",
      "Bash(bun run tsc:*)",
      "Bash(./node_modules/.bin/tsc:*)",
      "Bash(npx vitest:*)",
      "WebFetch(domain:raw.githubusercontent.com)",
      "Bash(git commit -m \"$(cat <<''EOF''\nchore: bump version to 0.8.0 - complete Store Creation & Management\n\nCompleted roadmap item 2 (Large feature):\n- Database schema: Subscription model, Store subdomain/description fields\n- Account-type store limits (FREE: 2, PRO: 5, ENTERPRISE: unlimited)\n- Server actions with validation and error handling\n- UI components: CreateStoreForm, CreateStoreButton with AccessGate\n- Private layout refactor with new PrivateHeader\n- FirstStoreCTA for new users on dashboard\n- Subdomain routing middleware (proxy.ts)\n- Full i18n support (Spanish/English)\n- Comprehensive test coverage\nEOF\n)\")",
      "Bash(timeout 180 bun test:*)",
      "Bash(python -c:*)",
      "Bash(node -e:*)",
      "Bash(bun run type-check:*)",
      "Bash(git mv:*)",
      "Bash(node_modules/.bin/tsc:*)",
      "Bash(timeout 120 bun test:*)",
      "Bash(timeout 240 bun test:*)",
      "Bash(npx prisma validate:*)",
      "Bash(bunx prisma migrate:*)",
      "Bash(npx prisma format:*)",
      "Bash(node -e \"\nconst fs = require(''fs'');\nconst content = \\`/**\n * Product Validation Schemas\n *\n * This file composes complete validation schemas for all product\n * use cases by combining reusable field validators from productFields.ts.\n *\n * Each schema is tailored to its specific use case:\n * - productBasicInfoSchema: Basic product information and SEO fields\n * - productMediaSchema: Product images validation with ordering\n * - productVariantSchema: Variant pricing and attribute validation\n * - productConfigSchema: Digital products and inventory configuration\n * - productAttributeSchema: Product attribute creation\n * - inventoryUpdateSchema: Inventory update operations\n * - reviewSchema: Product review validation\n * - bundleSchema: Product bundle creation\n *\n * Types are automatically inferred from schemas using yup.InferType\n * to ensure type safety across the application.\n */\n\nimport * as yup from ''yup'';\n\nimport {\n  nameField,\n  descriptionField,\n  slugField,\n  brandField,\n  seoTitleField,\n  seoDescriptionField,\n  urlField,\n  priceField,\n  promotionalPriceField,\n  skuField,\n  productStatusField,\n  quantityField,\n  lowStockThresholdField,\n  ratingField,\n  reviewTitleField,\n  reviewBodyField,\n  attributeTypeField,\n} from ''@/features/products/schemas/productFields'';\n\n/**\n * Product Basic Info Schema\n *\n * Validates basic product information including:\n * - Name, description, slug, brand (main product fields)\n * - Status and boolean flags (product state and features)\n * - SEO fields (title and description for search optimization)\n * - Additional URLs (custom slug and Open Graph image)\n */\nexport const productBasicInfoSchema = yup.object({\n  name: nameField.required(''El nombre del producto es obligatorio''),\n  description: descriptionField.optional(),\n  slug: slugField.required(''El slug es obligatorio''),\n  brand: brandField.optional(),\n  status: productStatusField.default(''DRAFT''),\n  isDigital: yup.boolean().default(false),\n  isFeatured: yup.boolean().default(false),\n  isNew: yup.boolean().default(false),\n  isOnSale: yup.boolean().default(false),\n  allowPromotions: yup.boolean().default(true),\n  trackInventory: yup.boolean().default(true),\n  // SEO fields\n  seoTitle: seoTitleField.optional(),\n  seoDescription: seoDescriptionField.optional(),\n  urlSlug: urlField.optional(),\n  ogImageUrl: urlField.optional(),\n});\n\n/**\n * Product Media Schema\n *\n * Validates product images with:\n * - URL validation for each image\n * - Alt text with character limit for accessibility\n * - Position field for image ordering\n * - Single primary image validation\n * - Minimum one image requirement\n */\nexport const productMediaSchema = yup.object({\n  images: yup.array().of(\n    yup.object({\n      id: yup.string().optional(),\n      url: urlField.required(''La URL de la imagen es obligatoria''),\n      altText: yup.string().max(200, ''El texto alt no puede exceder 200 caracteres'').optional(),\n      position: yup.number().integer().min(0).default(0),\n      isPrimary: yup.boolean().default(false),\n    })\n  ).min(1, ''Debes agregar al menos una imagen'')\n  .test(''unique-primary'', ''Solo puede haber una imagen primaria'', function(images) {\n    const primaryImages = images?.filter(img => img.isPrimary) || [];\n    return primaryImages.length <= 1;\n  }),\n});\n\n/**\n * Product Variant Schema\n *\n * Validates product variants with:\n * - SKU with format validation (uppercase, numbers, hyphens)\n * - Required price, optional promotional price and cost\n * - Promotional price must be less than regular price\n * - Attribute value IDs for linking to ProductAttributeValue records\n */\nexport const productVariantSchema = yup.object({\n  sku: skuField.required(''El SKU es obligatorio''),\n  price: priceField.required(''El precio es obligatorio''),\n  promotionalPrice: promotionalPriceField.optional(),\n  cost: priceField.optional(),\n  // Array of ProductAttributeValue IDs to link to this variant\n  attributeValueIds: yup.array()\n    .of(yup.string().required(''El ID del valor de atributo es obligatorio''))\n    .min(1, ''La variante debe tener al menos un valor de atributo''),\n});\n\n/**\n * Product Config Schema\n *\n * Validates product-specific configurations:\n * - isDigital flag for digital vs physical products\n * - trackInventory for stock management preference\n * - Digital product-specific fields (conditional validation)\n * - File information for digital downloads\n * - Download limits and expiration for security\n */\nexport const productConfigSchema = yup.object({\n  isDigital: yup.boolean().default(false),\n  trackInventory: yup.boolean().default(true),\n  // Digital product specific - conditional validation\n  digitalProduct: yup.object().when(''isDigital'', {\n    is: true,\n    then: (schema) => schema.shape({\n      downloadUrl: urlField.required(''La URL de descarga es obligatoria''),\n      fileName: yup.string()\n        .min(1, ''El nombre del archivo es obligatorio'')\n        .max(255, ''El nombre del archivo no puede exceder 255 caracteres'')\n        .required(),\n      fileType: yup.string()\n        .matches(/^[a-z0-9\\\\/]+$/, ''Tipo de archivo inválido'')\n        .required(),\n      fileSize: yup.number()\n        .positive(''El tamaño del archivo debe ser positivo'')\n        .required(''El tamaño del archivo es obligatorio''),\n      expirationDate: yup.date().nullable().optional(),\n      downloadLimit: yup.number()\n        .integer(''El límite de descarga debe ser un número entero'')\n        .min(1, ''El límite de descarga debe ser al menos 1'')\n        .optional(),\n    }).required(''Los campos del producto digital son obligatorios''),\n    otherwise: (schema) => schema.optional().strip(),\n  }),\n});\n\n/**\n * Product Attribute Schema\n *\n * Validates product attributes for creating custom product options.\n * Attributes define the types of variations a product can have\n * (e.g., Size, Color, Material).\n */\nexport const productAttributeSchema = yup.object({\n  name: nameField.required(''El nombre del atributo es obligatorio''),\n  type: attributeTypeField.required(''El tipo de atributo es obligatorio''),\n  values: yup.array()\n    .of(yup.string().trim().min(1, ''El valor no puede estar vacío''))\n    .min(1, ''El atributo debe tener al menos un valor''),\n});\n\n/**\n * Inventory Update Schema\n *\n * Validates inventory update operations for a specific\n * variant at a specific branch location.\n */\nexport const inventoryUpdateSchema = yup.object({\n  variantId: yup.string().required(''El ID de la variante es obligatorio''),\n  branchId: yup.string().required(''El ID de la sucursal es obligatorio''),\n  quantity: quantityField.required(''La cantidad es obligatoria''),\n  lowStockThreshold: lowStockThresholdField.optional(),\n});\n\n/**\n * Review Schema\n *\n * Validates product reviews submitted by customers.\n * Reviews must be tied to an order item to ensure the\n * customer actually purchased the product.\n */\nexport const reviewSchema = yup.object({\n  productId: yup.string().required(''El ID del producto es obligatorio''),\n  orderItemId: yup.string().required(''El ID del item de orden es obligatorio''),\n  rating: ratingField.required(''La calificación es obligatoria''),\n  title: reviewTitleField.required(''El título es obligatorio''),\n  body: reviewBodyField.optional(),\n});\n\n/**\n * Bundle Item Schema\n *\n * Validates individual items within a product bundle.\n */\nconst bundleItemSchema = yup.object({\n  productId: yup.string().required(''El ID del producto es obligatorio''),\n  variantId: yup.string().optional(),\n  quantity: yup.number()\n    .integer(''La cantidad debe ser un número entero'')\n    .min(1, ''La cantidad mínima es 1'')\n    .default(1),\n});\n\n/**\n * Bundle Schema\n *\n * Validates product bundle creation with multiple products.\n * Bundles allow merchants to sell groups of products together\n * at a special price.\n */\nexport const bundleSchema = yup.object({\n  name: nameField.required(''El nombre del bundle es obligatorio''),\n  description: descriptionField.optional(),\n  price: priceField.required(''El precio del bundle es obligatorio''),\n  isActive: yup.boolean().default(true),\n  items: yup.array()\n    .of(bundleItemSchema)\n    .min(2, ''El bundle debe tener al menos 2 productos''),\n});\n\n/**\n * Inferred TypeScript types from schemas\n *\n * These types are automatically generated from Yup schemas\n * and ensure type safety when using these schemas in forms\n * and server actions\n */\nexport type ProductBasicInfoInput = yup.InferType<typeof productBasicInfoSchema>;\nexport type ProductMediaInput = yup.InferType<typeof productMediaSchema>;\nexport type ProductVariantInput = yup.InferType<typeof productVariantSchema>;\nexport type ProductConfigInput = yup.InferType<typeof productConfigSchema>;\nexport type ProductAttributeInput = yup.InferType<typeof productAttributeSchema>;\nexport type InventoryUpdateInput = yup.InferType<typeof inventoryUpdateSchema>;\nexport type ReviewInput = yup.InferType<typeof reviewSchema>;\nexport type BundleItemInput = yup.InferType<typeof bundleItemSchema>;\nexport type BundleInput = yup.InferType<typeof bundleSchema>;\n\\`;\nfs.writeFileSync(''E:/personal-dev/lanzate/features/products/schemas/product.schema.ts'', content);\nconsole.log(''File written successfully'');\n\")",
      "Bash(xargs cat:*)",
      "Bash(npm run lint)"
    ],
    "deny": [],
    "ask": []
  },
  "spinnerTipsEnabled": true
}
